<!-- BEGIN app block: shopify://apps/gorgias-live-chat-helpdesk/blocks/gorgias/a66db725-7b96-4e3f-916e-6c8e6f87aaaa -->
<script defer data-gorgias-loader-chat type="load" d-src="https://config.gorgias.chat/bundle-loader/shopify/novo-london.myshopify.com"></script>
<script defer data-gorgias-loader-convert type="load"  d-src="https://bundle.9gtb.com/loader.js"></script>
<script defer data-gorgias-loader-mailto-replace type="load"  d-src="https://config.gorgias.help/api/contact-forms/replace-mailto-script.js?shopName=novo-london"></script>

<!-- END app block -->
<!-- BEGIN app block: shopify://apps/privy-pop-ups-email-sms/blocks/privy-convert-production/1d8599fa-4edf-4071-bda6-4d5d6d82de9c --><script type="load" d-src="https://shopify.privy.com/widget.js?shop=novo-london.myshopify.com"></script>

<!-- END app block -->

<!-- BEGIN app block: shopify://apps/klaviyo-email-marketing-sms/blocks/klaviyo-onsite-embed/2632fe16-c075-4321-a88b-50b567f42507 -->

  <script type="load" d-src="https://static.klaviyo.com/onsite/js/RBs7EE/klaviyo.js?company_id=RBs7EE"></script>
  <script type="load">!function(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get:function(n,i){return"push"===i?function(){var n;(n=window._klOnsite).push.apply(n,arguments)}:function(){for(var n=arguments.length,o=new Array(n),w=0;w<n;w++)o[w]=arguments[w];var t="function"==typeof o[o.length-1]?o.pop():void 0,e=new Promise((function(n){window._klOnsite.push([i].concat(o,[function(i){t&&t(i),n(i)}]))}));return e}}})}catch(n){window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){var n;(n=window._klOnsite).push.apply(n,arguments)}}}}();</script>

  
    {% if template contains 'product' %}
    <script type="load" id="viewed_product">
    if (item == null) {
    var _learnq = _learnq || [];
    var MetafieldReviews = null
    var MetafieldYotpoRating = null
    var MetafieldYotpoCount = null
    var MetafieldLooxRating = null
    var MetafieldLooxCount = null
    var okendoProduct = null
    var okendoProductReviewCount = null
    var okendoProductReviewAverageValue = null
    try {
    // The following fields are used for Customer Hub recently viewed in order to add reviews.
    // This information is not part of __kla_viewed. Instead, it is part of __kla_viewed_reviewed_items
    MetafieldReviews = {"rating": {"scale_min": "1.0","scale_max": "5.0","value": "{{ product.metafields.reviews.rating.value }}"},"rating_count": {{ product.metafields.reviews.rating_count.value | default: 0 }}};
    MetafieldYotpoRating = null
    MetafieldYotpoCount = null
    MetafieldLooxRating = null
    MetafieldLooxCount = null
    okendoProduct = null
    // If the okendo metafield is not legacy, it will error, which then requires the new json formatted data
    if (okendoProduct && 'error' in okendoProduct) {
    okendoProduct = null
    }
    okendoProductReviewCount = okendoProduct ? okendoProduct.reviewCount : null
    okendoProductReviewAverageValue = okendoProduct ? okendoProduct.reviewAverageValue : null
    } catch (error) {
    console.error('Error in Klaviyo onsite reviews tracking:', error);
    }
            var item = {
                Name: {{ product.title | json }},
                ProductID: {{ product.id | json }},            
                Categories: {{ product.collections | map: 'title' | json }},
                ImageURL: "https:{{ product.featured_image.src | img_url: 'grande' }}",
                URL: "{{ shop.secure_url }}{{ product.url }}",
                Brand: {{ product.vendor | json }},
                Price: {{ product.price | money | json }},
                Value: {{ product.price | money_without_currency | json }},
                CompareAtPrice: {{ product.compare_at_price_max | money | json }}
            };
    _learnq.push(['track', 'Viewed Product', item]);
    _learnq.push(['trackViewedItem', {
    Title: item.Name,
    ItemId: item.ProductID,
    Categories: item.Categories,
    ImageUrl: item.ImageURL,
    Url: item.URL,
    Metadata: {
    Brand: item.Brand,
    Price: item.Price,
    Value: item.Value,
    CompareAtPrice: item.CompareAtPrice
    },
    metafields:{
    reviews: MetafieldReviews,
    yotpo:{
    rating: MetafieldYotpoRating,
    count: MetafieldYotpoCount,
    },
    loox:{
    rating: MetafieldLooxRating,
    count: MetafieldLooxCount,
    },
    okendo: {
    rating: okendoProductReviewAverageValue,
    count: okendoProductReviewCount,
    }
    }
    }]);
    }
    </script>
    {% endif %}



  <script>
    window.klaviyoReviewsProductDesignMode = false
  </script>







<!-- END app block -->